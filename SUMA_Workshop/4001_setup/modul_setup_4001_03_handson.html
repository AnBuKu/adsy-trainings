<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>SUSE Manager 3 Setpu</title>

    <link rel="stylesheet" href="../common/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../common/reveal.js/css/theme/white.css">
    <link rel="stylesheet" href="../common/css/reveal-adsy.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../common/css/monokai.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
<section id="suse-manager-3-hands-on" class="slide level1">
<h1>SUSE Manager 3 Hands-on</h1>
<figure>
<img src="static/suma.png" />
</figure>
</section>
<section class="slide level1">

<section id="hands-on-setup-01" class="level2">
<h2>Hands-on :: Setup 01</h2>
<p>Access the training systems, prepare the system and install the SUMA.</p>
</section>
</section>
<section class="slide level1">

<section id="setup-01---login" class="level2">
<h2>Setup 01 - Login</h2>
<p>Connect to the training system with <code>ssh</code>:</p>
<pre class="text"><code># ssh &quot;user$nr&quot;@&quot;$hostsystem&quot;
# ssh root@&quot;suma$nr&quot;</code></pre>
</section>
<section id="setup-01---datadisks" class="level2">
<h2>Setup 01 - Datadisks</h2>
<p>Create the data disks and put a file system on the devices:</p>
<pre class="text"><code># pvcreate /dev/vdb

# vgcreate vg_data /dev/vdb

# lvcreate -l50%FREE -n lv_database vg_data

# lvcreate -l100%FREE -n lv_spacewalk vg_data

# mkfs.xfs /dev/mapper/vg_data-lv_database

# mkfs.xfs /dev/mapper/vg_data-lv_spacewalk</code></pre>
</section>
<section id="setup-01---mount-datadisks" class="level2">
<h2>Setup 01 - Mount Datadisks</h2>
<p>Delete the BTRFS pgsql subvolume and add the new devies to the <code>/etc/fstab</code>:</p>
<pre class="text"><code>UUID=9f9e1724-f38a-40f9-8d24-867a24cc8e0f /var/lib/pgsql xfs defaults 0 2
UUID=a13dd737-3042-42fb-9a09-1b88828d2bf5 /var/spacewalk xfs defaults 0 2</code></pre>
<p>Create the mountpoint and mount the new devices:</p>
<pre class="text"><code># mkdir /var/spacewalk

# mount -a</code></pre>
</section>
<section id="setup-01---attach-the-repositories-inet" class="level2">
<h2>Setup 01 - Attach the repositories (INET)</h2>
<p>If you have internet access (via proxy), register with scc.suse.com:</p>
<pre class="text"><code># SUSEConnect -e &quot;$mail_address&quot; -r &quot;$registration_code&quot;

# SUSEConnect -p SUSE-Manager-Server/3.0/x86_64 -r &quot;$registration_code&quot;</code></pre>
</section>
<section id="setup-01---attach-the-repositories-smt" class="level2">
<h2>Setup 01 - Attach the repositories (SMT)</h2>
<p>If you don't have internet access, get the repositories from your SMT server:</p>
<pre class="text"><code># SUSEConnect -p SUSE-Manager-Server/3.0/x86_64</code></pre>
</section>
<section id="setup-01---verify-the-respositories" class="level2">
<h2>Setup 01 - Verify the respositories</h2>
<p>Check if the SUMA repositories are available on your machine:</p>
<pre class="text"><code># zypper repos</code></pre>
</section>
</section>
<section class="slide level1">

<section id="setup-01---installation" class="level2">
<h2>Setup 01 - Installation</h2>
<p>Verify if the SUMA pattern is available and install it:</p>
<pre class="text"><code># zypper search -t pattern suma_server

# zypper info -t pattern suma_server

# zypper install -t pattern suma_server</code></pre>
</section>
</section>
<section class="slide level1">

<section id="setup-01---setup" class="level2">
<h2>Setup 01 - Setup</h2>
<p>Run the <code>yast2</code> command to start the setup:</p>
<pre class="text"><code># yast2 susemanager_setup</code></pre>
</section>
<section id="setup-01---e-mail-address" class="level2">
<h2>Setup 01 - E-mail Address</h2>
<figure>
<img src="static/yast2_suma_setup_1_email_addr.png" />
</figure>
</section>
<section id="setup-01---certificate" class="level2">
<h2>Setup 01 - Certificate</h2>
<figure>
<img src="static/yast2_suma_setup_2_cert_setup.png" />
</figure>
</section>
<section id="setup-01---database" class="level2">
<h2>Setup 01 - Database</h2>
<figure>
<img src="static/yast2_suma_setup_3_db_setup.png" />
</figure>
</section>
<section id="setup-01---scc" class="level2">
<h2>Setup 01 - SCC</h2>
<figure>
<img src="static/yast2_suma_setup_4_scc.png" />
</figure>
</section>
</section>
<section class="slide level1">

<section id="setup-01---first-login" class="level2">
<h2>Setup 01 - First Login</h2>
<p>Open a SSH tunnel:</p>
<pre class="text"><code>$ ssh -Nf -R 0.0.0.0:$high_port:localhost:443 &quot;$user&quot;@&quot;$trainings_host&quot;</code></pre>
<p>Access the WebUI with your browser:</p>
<p>https://training.cust.adfinis-sygroup.ch:&quot;$high_port&quot;</p>
</section>
<section id="setup-01---create-organization-and-user" class="level2">
<h2>Setup 01 - Create Organization and User</h2>
<figure>
<img src="static/webui_1_create_org.png" />
</figure>
</section>
</section>
      </div>
    </div>

    <script src="../common/reveal.js/lib/js/head.min.js"></script>
    <script src="../common/reveal.js/js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        center: true,

        menu: {
          themes: false,
          transitions: false,
          openButton: false,
          openSlideNumber: true,
          markers: true
        },

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: '../common/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../common/reveal.js/plugin/notes/notes.js', async: true },
          { src: '../common/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../common/reveal.js-menu/menu.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>
