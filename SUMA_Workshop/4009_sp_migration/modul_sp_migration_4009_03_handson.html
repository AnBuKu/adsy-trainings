<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>SUSE Manager SP Migration</title>

    <link rel="stylesheet" href="../common/reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../common/reveal.js/css/theme/white.css">
    <link rel="stylesheet" href="../common/css/reveal-adsy.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../common/css/monokai.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
<section id="suse-manager-3-hands-on" class="slide level1">
<h1>SUSE Manager 3 Hands-on</h1>
<figure>
<img src="static/suma.png" />
</figure>
</section>
<section class="slide level1">

<section id="hands-on-sp-migration-09" class="level2">
<h2>Hands-on :: SP Migration 09</h2>
<p>Synchronize SP2 repositories and migrate a system.</p>
</section>
</section>
<section class="slide level1">

<section id="sp-migration-09---import" class="level2">
<h2>SP Migration 09 - Import</h2>
<p>Configure the new repository data.</p>
<p>Stop the tomcat service:</p>
<pre class="text"><code># systemctl stop tomcat</code></pre>
<p>Change the data directory in <code>/etc/rhn/rhn.conf</code> to:</p>
<pre class="text"><code># local data directory
server.susemanager.fromdir = /data/repos_wSP2_20161116</code></pre>
<p>Start the tomcat service:</p>
<pre class="text"><code># systemctl start tomcat</code></pre>
</section>
<section id="sp-migration-09---synchronization" class="level2">
<h2>SP Migration 09 - Synchronization</h2>
<p>Refresh the channel and schedule a reposyn:</p>
<pre class="text"><code># mgr-sync refresh 

# mgr-sync list channel 

# mgr-sync add channel sles12-sp2-pool-x86_64 

# mgr-sync add channel sles12-sp2-updates-x86_64 

# mgr-sync add channel sle-manager-tools12-pool-x86_64-sp2 

# mgr-sync add channel sle-manager-tools12-updates-x86_64-sp2 </code></pre>
<p>Verify the synchronization:</p>
<pre class="text"><code># ls -la /var/log/rhn/reposync/*sp2*</code></pre>
</section>
<section id="sp-migration-09---vendor-channel" class="level2">
<h2>SP Migration 09 - Vendor Channel</h2>
<p>Check the SLES12 SP2 vendor channels:</p>
<figure>
<img src="static/webui_01_channels.png" />
</figure>
</section>
<section id="sp-migration-09---vendor-channel-1" class="level2">
<h2>SP Migration 09 - Vendor Channel</h2>
<p>Check the SLES12 SP2 vendor channels:</p>
<pre class="text"><code># spacecmd softwarechannel_list | grep sp2
INFO: Connected to https://localhost/rpc/api as admin
sle-manager-tools12-pool-x86_64-sp2
sle-manager-tools12-updates-x86_64-sp2
sles12-sp2-pool-x86_64
sles12-sp2-updates-x86_64

# spacecmd softwarechannel_details sles12-sp2-pool-x86_64
INFO: Connected to https://localhost/rpc/api as admin
Label:              sles12-sp2-pool-x86_64
Name:               SLES12-SP2-Pool for x86_64
Architecture:       x86_64
Parent:             
Systems Subscribed: 0
Number of Packages: 3683
[...]</code></pre>
</section>
</section>
<section class="slide level1">

<section id="sp-migration-09---clone-channels" class="level2">
<h2>SP Migration 09 - Clone Channels</h2>
<p>Clone the SLES12 SP1 channels:</p>
<pre class="text"><code># spacewalk-manage-channel-lifecycle -u admin -p &quot;$pw&quot; \
                                     -w adsy-sles12 \
                                     --channel sles12-sp2-pool-x86_64 \
                                     --init

INFO: Cloning devl-sles12-sp2-pool-x86_64 from sles12-sp2-pool-x86_64 
INFO: Cloning devl-sle-manager-tools12-pool-x86_64-sp2 from sle-manager-tools12-pool-x86_64-sp2 
INFO: Cloning devl-sle-manager-tools12-updates-x86_64-sp2 from sle-manager-tools12-updates-x86_64-sp2 
INFO: Cloning devl-sles12-sp2-updates-x86_64 from sles12-sp2-updates-x86_64

# spacewalk-manage-channel-lifecycle -u admin -p &quot;$pw&quot; \
                                     -w adsy-sles12 \
                                     --channel devl-sles12-sp2-pool-x86_64 \
                                     --promote

INFO: Cloning prod-sles12-sp2-pool-x86_64 from devl-sles12-sp2-pool-x86_64
INFO: Cloning prod-sle-manager-tools12-pool-x86_64-sp2 from devl-sle-manager-tools12-pool-x86_64-sp2
INFO: Cloning prod-sle-manager-tools12-updates-x86_64-sp2 from devl-sle-manager-tools12-updates-x86_64-sp2
INFO: Cloning prod-sles12-sp2-updates-x86_64 from devl-sles12-sp2-updates-x86_64</code></pre>
</section>
</section>
<section class="slide level1">

<section id="sp-migration-09---system-overview" class="level2">
<h2>SP Migration 09 - System Overview</h2>
<p>Click on srv1:</p>
<figure>
<img src="static/webui_02_system_overview.png" />
</figure>
</section>
<section id="sp-migration-09---system" class="level2">
<h2>SP Migration 09 - System</h2>
<p>Chck current &quot;Installed Products&quot;:</p>
<figure>
<img src="static/webui_03_system_srv1.png" />
</figure>
</section>
<section id="sp-migration-09---sp-migration" class="level2">
<h2>SP Migration 09 - SP Migration</h2>
<p>Go to &quot;Software / SP Migration&quot; select SP2 and click &quot;Target Migration&quot;:</p>
<figure>
<img src="static/webui_04_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---sp-migration-1" class="level2">
<h2>SP Migration 09 - SP Migration</h2>
<p>Choose the development channel and click &quot;Schedule Migration&quot;:</p>
<figure>
<img src="static/webui_05_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---dry-run" class="level2">
<h2>SP Migration 09 - Dry Run</h2>
<p>Click on &quot;Dry Run&quot;:</p>
<figure>
<img src="static/webui_06_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---pending-events" class="level2">
<h2>SP Migration 09 - Pending Events</h2>
<p>Check the Pending Events:</p>
<figure>
<img src="static/webui_08_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---events-history" class="level2">
<h2>SP Migration 09 - Events History</h2>
<p>Check the Events History and select the &quot;Service Pack Migration&quot; Event:</p>
<figure>
<img src="static/webui_09_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---sp-migration-event" class="level2">
<h2>SP Migration 09 - SP Migration Event</h2>
<p>Check the output and the return code:</p>
<figure>
<img src="static/webui_10_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---run" class="level2">
<h2>SP Migration 09 - Run</h2>
<p>Start the actual Service Pack Migration:</p>
<figure>
<img src="static/webui_11_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---system-status" class="level2">
<h2>SP Migration 09 - System Status</h2>
<p>Click on &quot;Schedule System Reboot&quot;:</p>
<figure>
<img src="static/webui_12_sp_migration.png" />
</figure>
</section>
<section id="sp-migration-09---reboot" class="level2">
<h2>SP Migration 09 - Reboot</h2>
<p>Click on &quot;Reboot system&quot; to initiate the reboot:</p>
<figure>
<img src="static/webui_13_sp_migration.png" />
</figure>
</section>
</section>
      </div>
    </div>

    <script src="../common/reveal.js/lib/js/head.min.js"></script>
    <script src="../common/reveal.js/js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        center: true,

        menu: {
          themes: false,
          transitions: false,
          openButton: false,
          openSlideNumber: true,
          markers: true
        },

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          { src: '../common/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../common/reveal.js/plugin/notes/notes.js', async: true },
          { src: '../common/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../common/reveal.js-menu/menu.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });
    </script>
  </body>
</html>
